(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{18:function(e,t,r){"use strict";var n=r(10),a=r.n(n),c=r(21),s=r(17),o=r.n(s),u=r(9),i=r(6);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var l=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){o.a.defaults.headers.common.Authorization=""},j=Object(u.b)("auth/register",function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.a.post("/users/signup",t);case 4:return c=e.sent,s=c.data,l(s.token),i.b.success("You have successfully registered!"),e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(1),i.b.error("Oppps, something went wrong! Try again please"),e.abrupt("return",n(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()),f=Object(u.b)("auth/login",function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.a.post("/users/login",t);case 4:return c=e.sent,s=c.data,l(s.token),i.b.success("You are successfully logged in!"),e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(1),i.b.error("Please check if you entered password and email correctly"),e.abrupt("return",n(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()),p={register:j,logOut:Object(u.b)("auth/logout",function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,o.a.post("/users/logout");case 4:b(),i.b.success("See you later!"),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),i.b.error("Oppps, something went wrong! Try again please"),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),logIn:f,refreshUser:Object(u.b)("users/current",function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.getState(),null!==(c=n.auth.token)){e.next=4;break}return e.abrupt("return",r.rejectWithValue());case 4:return l(c),e.prev=5,e.next=8,o.a.get("/users/current");case 8:return s=e.sent,u=s.data,e.abrupt("return",u);case 13:return e.prev=13,e.t0=e.catch(5),i.b.error("Oppps, something went wrong! Try again please"),e.abrupt("return",r.rejectWithValue(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,r){return e.apply(this,arguments)}}())};t.a=p},19:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return j}));var n=r(10),a=r.n(n),c=r(21),s=r(9),o=r(17),u=r.n(o),i=r(6),l=Object(s.b)("contacts/getContacts",function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,u.a.get("/contacts");case 4:return c=e.sent,e.abrupt("return",c.data);case 8:return e.prev=8,e.t0=e.catch(1),i.b.error("Oppps, something went wrong! Try again please"),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),b=Object(s.b)("contacts/addContact",function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,u.a.get("/contacts");case 4:if(c=e.sent,s=c.data.map((function(e){return e.name})),!(-1!==s.indexOf(t.name))){e.next=12;break}return i.b.error("".concat(t.name," is already in Contacts")),e.abrupt("return");case 12:return e.next=14,u.a.post("/contacts",t);case 14:return o=e.sent,console.log(o.data),e.abrupt("return",o.data);case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(1),i.b.error("Oppps, something went wrong! Try again please"),e.abrupt("return",n(e.t0.message));case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,r){return e.apply(this,arguments)}}()),j=Object(s.b)("contacts/delete",function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,e.next=4,u.a.delete("/contacts/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),i.b.error("Oppps, something went wrong! Try again please"),e.abrupt("return",n(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}())},34:function(e,t,r){"use strict";r.d(t,"c",(function(){return p})),r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return f}));var n,a=r(5),c=r(50),s=r(2),o=r(9),u=r(6),i=r(19),l=Object(o.c)({name:"contacts",initialState:{items:[],status:null,error:null},extraReducers:(n={},Object(a.a)(n,i.c.fulfilled,(function(e,t){var r=t.payload;return Object(s.a)(Object(s.a)({},e),{},{items:r,status:null,error:null})})),Object(a.a)(n,i.c.pending,(function(e,t){return Object(s.a)(Object(s.a)({},e),{},{status:"loading",error:null})})),Object(a.a)(n,i.c.rejected,(function(e,t){var r=t.error;return Object(s.a)(Object(s.a)({},e),{},{status:"error",error:r.message})})),Object(a.a)(n,i.a.fulfilled,(function(e,t){var r=t.payload;return r?(u.b.success("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 ".concat(r.name," \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")),Object(s.a)(Object(s.a)({},e),{},{items:[].concat(Object(c.a)(e.items),[r]),status:null,error:null})):e})),Object(a.a)(n,i.a.pending,(function(e,t){return Object(s.a)(Object(s.a)({},e),{},{status:"adding",error:null})})),Object(a.a)(n,i.a.rejected,(function(e,t){var r=t.error;return Object(s.a)(Object(s.a)({},e),{},{status:"error",error:r.message})})),Object(a.a)(n,i.b.fulfilled,(function(e,t){var r=t.payload;return u.b.success("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0443\u0434\u0430\u043b\u0435\u043d"),Object(s.a)(Object(s.a)({},e),{},{items:e.items.filter((function(e){return e.id!==r})),status:null,error:null})})),Object(a.a)(n,i.b.pending,(function(e,t){return Object(s.a)(Object(s.a)({},e),{},{status:"deleting",error:null})})),Object(a.a)(n,i.b.rejected,(function(e,t){var r=t.error;return Object(s.a)(Object(s.a)({},e),{},{status:"error",error:r.message})})),n)}),b=Object(o.c)({name:"filter",initialState:"",reducers:{filterContacts:function(e,t){return t.payload}}}),j=l.reducer,f=b.reducer,p=b.actions.filterContacts},79:function(e,t,r){},85:function(e,t,r){"use strict";r.r(t);var n,a=r(0),c=r.n(a),s=r(29),o=r.n(s),u=r(20),i=r(7),l=r(9),b=r(8),j=r(22),f=r(47),p=r.n(f),d=r(34),g=r(5),O=r(18),h=Object(l.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefresh:!1},extraReducers:(n={},Object(g.a)(n,O.a.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(g.a)(n,O.a.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(g.a)(n,O.a.logOut.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(g.a)(n,O.a.refreshUser.pending,(function(e){e.isRefresh=!0})),Object(g.a)(n,O.a.refreshUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isRefresh=!1})),Object(g.a)(n,O.a.refreshUser.rejected,(function(e){e.isRefresh=!1})),n)}).reducer,x={key:"auth",storage:p.a,whitelist:["token"]},m=Object(b.b)({contacts:d.a,filter:d.b}),v=Object(l.a)({reducer:{auth:Object(j.g)(x,h),phonebook:m},devTools:!1,middleware:function(e){return e({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})}}),y=Object(j.h)(v),k=r(48),w=(r(79),r(6)),I=r(4),L=r(11);var T=Object(L.a)("div",{target:"efinbxe0"})({name:"1yjx7km",styles:"padding:20px"}),z=r(1);var C=function(e){var t=e.children;return Object(z.jsx)(T,{children:t})};var R=Object(L.a)("header",{target:"e1nelnbf0"})({name:"1n2a0rn",styles:"display:flex;justify-content:space-between;padding:20px;align-items:center;color:#ffffff;background-color:#22803e;box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)"}),W={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserEmail:function(e){return e.auth.user.email},getIsRefreshingCurrent:function(e){return e.auth.isRefresh}};var S=Object(L.a)("nav",{target:"evfgqzs2"})({name:"606i4c",styles:"padding:12px"}),U=Object(L.a)(u.b,{target:"evfgqzs1"})({name:"6targe",styles:"display:inline-block;text-decoration:none;font-weight:700;font-size:20px;color:#ffffff;&:hover{color:#e0e0e0;}&.active{color:#d9e66b;}"}),V=Object(L.a)("span",{target:"evfgqzs0"})({name:"o0u266",styles:"display:inline-block;font-weight:700;font-size:20px;color:#ffffff"}),q=function(){var e=Object(i.c)(W.getIsLoggedIn);return Object(z.jsx)(S,{children:e?Object(z.jsx)(U,{to:"/contacts",children:"My Phonebook"}):Object(z.jsx)(V,{children:"Remember people, not numbers!"})})},F=r(38);var P=Object(L.a)("div",{target:"e1j3s2sp2"})({name:"mvkby9",styles:"display:flex;align-items:center;margin-left:auto"}),E=Object(L.a)("span",{target:"e1j3s2sp1"})({name:"ag4muq",styles:"font-weight:700;font-size:20px;margin-right:12px"}),A=Object(L.a)(F.a,{target:"e1j3s2sp0"})({name:"1q049e0",styles:"font-weight:400;font-size:18px"});function B(){var e=Object(i.b)(),t=Object(i.c)(W.getUserEmail);return Object(z.jsxs)(P,{children:[Object(z.jsxs)(E,{children:["Welcome, ",t,"!"]}),Object(z.jsx)(A,{variant:"primary",type:"button",onClick:function(){return e(O.a.logOut())},children:"Log Out"})]})}var J=Object(L.a)("div",{target:"esgbmf01"})({name:"mvkby9",styles:"display:flex;align-items:center;margin-left:auto"}),M=Object(L.a)(u.b,{target:"esgbmf00"})({name:"1rud5b9",styles:"display:inline-block;text-decoration:none;padding:12px;font-weight:700;font-size:20px;color:#ffffff;&:hover{color:#e0e0e0;}&.active{color:#d9e66b;}"});function Y(){return Object(z.jsxs)(J,{children:[Object(z.jsx)(M,{to:"/register",children:"Registration"}),Object(z.jsx)(M,{to:"/login",children:"Log In"})]})}var D=r.p+"static/media/phonebook.6b55aa3d.png";function G(){var e=Object(i.c)(W.getIsLoggedIn);return Object(z.jsxs)(R,{children:[Object(z.jsx)("img",{src:D,alt:"phonebook",width:"80"}),Object(z.jsx)(q,{}),e?Object(z.jsx)(B,{}):Object(z.jsx)(Y,{})]})}var H=r(2),K=r(24),N=["children","redirectTo"];function Q(e){var t=e.children,r=e.redirectTo,n=void 0===r?"/login":r,a=Object(K.a)(e,N),c=Object(i.c)(W.getIsLoggedIn);return Object(z.jsx)(I.b,Object(H.a)(Object(H.a)({},a),{},{children:c?t:Object(z.jsx)(I.a,{to:n})}))}var X=["children","restricted","redirectTo"];function Z(e){var t=e.children,r=e.restricted,n=void 0!==r&&r,a=e.redirectTo,c=void 0===a?"/login":a,s=Object(K.a)(e,X),o=Object(i.c)(W.getIsLoggedIn)&&n;return Object(z.jsx)(I.b,Object(H.a)(Object(H.a)({},s),{},{children:o?Object(z.jsx)(I.a,{to:c}):t}))}var $=Object(a.lazy)((function(){return r.e(5).then(r.bind(null,129))})),_=Object(a.lazy)((function(){return r.e(4).then(r.bind(null,130))})),ee=Object(a.lazy)((function(){return Promise.all([r.e(3),r.e(6)]).then(r.bind(null,128))}));var te=function(){var e=Object(i.c)(W.getIsRefreshingCurrent),t=Object(i.b)();return Object(a.useEffect)((function(){t(O.a.refreshUser())}),[t]),Object(z.jsxs)(C,{children:[e?Object(z.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c"}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(G,{}),Object(z.jsx)(I.d,{children:Object(z.jsxs)(a.Suspense,{fallback:Object(z.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:[Object(z.jsx)(Z,{path:"/",children:Object(z.jsx)(I.a,{from:"/",to:"/login"})}),Object(z.jsx)(Z,{exact:!0,path:"/register",restricted:!0,children:Object(z.jsx)($,{})}),Object(z.jsx)(Z,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(z.jsx)(_,{})}),Object(z.jsx)(Q,{exact:!0,path:"/contacts",redirectTo:"/login",children:Object(z.jsx)(ee,{})})]})})]}),Object(z.jsx)(w.a,{})]})},re=function(e){e&&e instanceof Function&&r.e(7).then(r.bind(null,127)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};r(83),r(84);o.a.render(Object(z.jsx)(c.a.StrictMode,{children:Object(z.jsx)(i.a,{store:v,children:Object(z.jsx)(k.a,{loading:null,persistor:y,children:Object(z.jsx)(u.a,{children:Object(z.jsx)(te,{})})})})}),document.getElementById("root")),re()}},[[85,1,2]]]);
//# sourceMappingURL=main.8b9ecc73.chunk.js.map